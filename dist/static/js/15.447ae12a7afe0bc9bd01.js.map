{"version":3,"sources":["webpack:///src/components/game.vue","webpack:///./src/components/game.vue?ad22","webpack:///./src/components/game.vue"],"names":["components_game","data","baseUrl","mode","this","$route","query","matching","rival","rule","batch_id","myScore","rivalScore","score","consuming","consumingText","max_duration","userInfo","$store","state","beginTime","endTime","cacheData","beginData","gameStatus","timingLeftStyle","timingRightStyle","isRotate","timingCount","consumingTimer","countdownTimer","questionTimer","rivalTimer","gameTimer","checkAnswerTimer","currentQuestion","questionIndex","isCorrect","answerList","isCanDoAnswer","isPkWin","audioSrc","rivalAnswerStatus","correctCount","wrongCount","audioPlaying","created","u","navigator","userAgent","isIOS","match","init","methods","destroyTimer","begin","_this","setInterval","$api","answerBegin","then","res","code","answerBeginHandle","$popup","msg","goBack","getQuestion","clearInterval","_this2","length","beginGame","bindAudioEvent","index","_this3","gameEnd","options_list","map","a","arr","correct_list","i","indexOf","duration","audio","audioPreload","setTimeout","Date","getTime","timingCountDown","ruleitem","Math","floor","rival_correct","isBothAnswer","rival_duration","_this4","console","log","answerEnd","doAnswer","bool","some","question_type","checkAnswerIsCorrect","checkAnswer","$forceUpdate","manualAnswer","_this5","stopAudio","win_score","one_correct_score","level_score","questionReply","isLevelWrong","_this6","a_length","filter","c_length","is","every","_this7","loadedmetadata","document","getElementById","_this8","$nextTick","forEach","src","source","createElement","type","split","appendChild","addEventListener","load","playAudio","play","removeEventListener","pause","currentTime","_this9","time","_this10","t","Number","count","nextLevel","selecteds","String","param","question_id","id","oneMoreTry","$router","go","clearTimeout","beforeDestroy","watch","v","m","s","filters","duration2str","ceil","h","selectortype_template_index_0_src_components_game","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","avatar","_v","_e","_s","on","click","class","success","fail","rotate","style","grey","_m","title","image","playing","_f","_l","q","key","choose","correct","$event","staticStyle","height","overflow","staticRenderFns","display","preload","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/15.447ae12a7afe0bc9bd01.js","sourcesContent":["<template>\n    <div class=\"game-wrap\">\n        <div class=\"matching\" v-if=\"mode=='pk' && gameStatus == 'matching'\">\n            <div class=\"matching-animate\">\n                <div class=\"user\">\n                    <img :src=\"userInfo.avatar\">\n                </div>\n                <div class=\"matching-planet matching-planet-1\"></div>\n                <div class=\"matching-planet matching-planet-2\"></div>\n                <div class=\"matching-planet matching-planet-3\"></div>\n                <div class=\"rival\" v-if=\"!matching\">\n                    <img :src=\"rival.avatar\">\n                </div>\n            </div>\n            <div class=\"matching-consuming\" v-if=\"matching\">正在匹配 {{consumingText}}</div>\n            <div class=\"matching-consuming\" v-else>匹配完成</div>\n            <div class=\"matching-btn matching-btn-cancel\" v-if=\"matching\" @click=\"goBack\">取消</div>\n            <div class=\"matching-btn matching-btn-done\" v-else>正在进入</div>\n        </div>\n\n        <div class=\"game-container\" v-if=\"gameStatus !== 'matching' && gameStatus!=='end'\">\n            <div class=\"game-player\">\n                <div class=\"game-player-self\">\n                    <div class=\"game-player-score\">{{myScore}}</div>\n                    <div :class=\"['game-player-avatar',{success:isCorrect=='success'},{fail:isCorrect=='fail'}]\">\n                        <img :src=\"userInfo.avatar\">\n                    </div>\n                </div>\n                <div class=\"game-player-rival\" v-if=\"mode=='pk'\">\n                    <div :class=\"['game-player-avatar',rivalAnswerStatus]\">\n                        <img :src=\"rival.avatar\">\n                    </div>\n                    <div class=\"game-player-score\">{{rivalScore}}</div>\n                </div>\n                <div class=\"game-timing\" v-if=\"(gameStatus=='start' || gameStatus=='checking') && mode!=='unlimited'\">\n                    <div class=\"game-timing-left\"><i :class=\"{rotate:isRotate}\" :style=\"timingLeftStyle\"></i></div>\n                    <div class=\"game-timing-right\"><i :class=\"{rotate:isRotate}\" :style=\"timingRightStyle\"></i></div>\n                    <span>{{timingCount}}</span>\n                </div>\n                <div class=\"game-remaining\" v-if=\"(gameStatus=='start' || gameStatus=='checking') && mode=='unlimited'\">\n                    <i :class=\"{grey:wrongCount>0}\"></i>\n                    <i :class=\"{grey:wrongCount>1}\"></i>\n                    <i :class=\"{grey:wrongCount>2}\"></i>\n                </div>\n            </div>\n            <div :class=\"['game-question-type',currentQuestion.question_type]\" v-if=\"gameStatus=='prepare'\">\n                <label>第{{questionIndex+1}}题</label>\n                <div class=\"q-type\">{{currentQuestion.question_type == \"single\" ? \"单选题\" : \"多选题\"}}</div>\n            </div>\n            <div style=\"display: none;\">\n                <audio id=\"qa-audio\" preload=\"preload\"></audio>\n            </div>\n            <div class=\"game-qa\" v-if=\"gameStatus=='start' || gameStatus=='checking'\">\n                <div class=\"game-question\">\n                    {{currentQuestion.title}}\n                    <img v-if=\"currentQuestion.image\" :src=\"currentQuestion.image\">\n                    <div class=\"game-q-audio\" :class=\"{playing:audioPlaying}\" @click=\"playAudio\" v-if=\"currentQuestion.audio\">\n                        <span>{{currentQuestion.duration|duration2str}}</span><span>{{isIOS ? \"  点击播放\":\"\"}}</span>\n                    </div>\n                </div>\n                <ul class=\"game-answer-list\">\n                    <li v-for=\"(q,i) in currentQuestion.options_list\" :key=\"i\" @click=\"doAnswer(i)\"\n                        :class=\"{\n                            choose : answerList[i]==1,\n                            correct: currentQuestion.correct_list[i] && gameStatus=='checking',\n                            success: currentQuestion.correct_list[i] && answerList[i]==1 && gameStatus=='checking',\n                            fail : !currentQuestion.correct_list[i] && answerList[i]==1 && gameStatus=='checking'\n                        }\"\n                    >{{q}}</li>\n                </ul>\n                <div :class=\"['game-answer-result',isCorrect ? isCorrect : '']\" v-if=\"gameStatus=='checking'\">\n                    <span v-if=\"isCorrect=='fail'\">很遗憾，回答错误</span>\n                    <span v-if=\"isCorrect=='success'\">恭喜您，回答正确</span>\n                </div>\n            </div>\n            <div style=\"height: 1.86rem\" v-if=\"currentQuestion.question_type != 'single' && gameStatus=='start'\"></div>\n            <div class=\"mulit-btn\" v-if=\"currentQuestion.question_type != 'single' && gameStatus=='start'\" @click=\"manualAnswer\">确定</div>\n        </div>\n\n        <div :class=\"['layer-pk-mode',isPkWin?'success':'fail']\" v-if=\"gameStatus == 'end'\">\n            <div class=\"gameover-result-title\">{{isPkWin?\"胜利\":\"失败\"}}</div>\n            <div class=\"gameover-result-content\">\n                <div style=\"overflow: hidden;\" v-if=\"mode == 'pk'\">\n                    <div class=\"myself\">\n                        <div class=\"avatar\"><img :src=\"userInfo.avatar\"></div>\n                        <div class=\"score\">{{myScore}}</div>\n                    </div>\n                    <div class=\"rival\">\n                        <div class=\"avatar\"><img :src=\"rival.avatar\"></div>\n                        <div class=\"score\">{{rivalScore}}</div>\n                    </div>\n                </div>\n                <div style=\"overflow: hidden;\" v-else>\n                    <div class=\"myself\">\n                        <div class=\"avatar\"></div>\n                    </div>\n                </div>\n                <label class=\"game-this-round\"><em>本局奖励</em></label>\n                <div class=\"game-score-count\">积分+{{score}}</div>\n                <div class=\"gameover-btns\">\n                    <a class=\"goback\" @click=\"goBack\">返回</a>\n                    <a class=\"try-again\" @click=\"oneMoreTry()\" v-if=\"mode!='level'\">再来一局</a>\n                    <a class=\"try-again\" \n                    @click=\"oneMoreTry()\" \n                    v-if=\"mode=='level' && gameStatus == 'end' && (questionIndex==beginData.length-1 || (questionIndex<beginData.length-1 && !isPkWin))\" \n                    >再来一局</a>\n                    <a class=\"try-again\" @click=\"nextLevel()\" v-if=\"mode=='level' && gameStatus == 'end' && questionIndex<beginData.length-1 && isPkWin\" >下一关</a>\n                </div>\n            </div>\n            \n        </div>\n\n\n    </div>\n</template>\n\n<script>\n    import '../assets/scss/game.scss'\n    export default {\n        data() {\n            return {\n                baseUrl : \"http://ask.dxytg.com\",\n                mode : this.$route.query.mode || \"pk\",      //模式\n                matching : true,                    //匹配状态 true匹配中\n                rival : {},                          //对手  \n                rule : {}, \n                batch_id : 0,\n                myScore : 0,\n                rivalScore : 0,\n                score : 0,\n                consuming : 0,                      //耗时\n                consumingText : '00:00',            //耗时\n                max_duration : 20,\n                userInfo : this.$store.state.userInfo,\n                beginTime : '',\n                endTime : '',\n                cacheData : {},\n                beginData : {},\n                gameStatus : 'matching',            //游戏状态 matching 匹配中 prepare 准备 start 开始 checking 检查答案 end 结束\n                timingLeftStyle : '',\n                timingRightStyle : '',\n                isRotate : false,\n                timingCount : 10,\n                consumingTimer : null,\n                countdownTimer : null,\n                questionTimer : null,\n                rivalTimer : null,\n                gameTimer : null,\n                checkAnswerTimer : null,\n                currentQuestion : {},\n                questionIndex : 0,\n                isCorrect : '',\n                answerList : [],\n                isCanDoAnswer : true,\n                isPkWin : false,\n                audioSrc : false,\n                rivalAnswerStatus : '',\n                correctCount : 0,\n                wrongCount : 0,\n                audioPlaying : false\n            }\n        },\n        created() {\n            var u = navigator.userAgent;\n            this.isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n            this.init();\n        },\n        methods: {\n            init(){\n                this.destroyTimer();\n                this.matching = true;\n                this.gameStatus = 'matching';\n                this.isCanDoAnswer = true;\n                this.beginData = [];\n                this.questionIndex = 0;\n                this.timingLeftStyle = '';\n                this.timingRightStyle = '';\n                this.consuming = 0;\n                this.myScore = 0;\n                this.rivalScore = 0;\n                this.isCorrect= '';\n                this.rivalAnswerStatus = '';\n                this.wrongCount = 0;\n                this.begin();\n            },\n            /** 开始 **/\n            begin(){\n                if(this.mode == 'pk'){\n                    this.consumingTimer = setInterval(()=>{\n                        this.consuming++;\n                    },1000)\n                }\n                this.$api.answerBegin({\n                    mode : this.mode\n                }).then(res=>{\n                    if(res.code == 1){\n                        this.answerBeginHandle(res.data);\n                    }else{\n                        this.$popup(res.msg);\n                        this.goBack();\n                    }\n                })\n            },\n            answerBeginHandle(data){\n                this.rival = data.rival;\n                this.rule = data.rule;\n                this.batch_id = data.batch_id;\n                this.getQuestion(data.batch_id);\n                clearInterval(this.consumingTimer);\n                this.consumingTimer = null;\n            },\n            /**\n            *   获取问题列表\n            */\n            getQuestion(batch_id){\n                this.$api.getQuestion({\n                    batch_id : batch_id\n                }).then(res=>{\n                    if(res.code == 1 && res.data.length){\n                        this.beginData = res.data;\n                        this.beginGame(0);\n                        this.bindAudioEvent();\n                    }else{\n                        this.$popup(res.msg || \"服务器数据出错\");\n                        this.goBack();\n                    }\n                })\n            },\n            beginGame(index){\n                if(index >= this.beginData.length){\n                    this.gameEnd();\n                    return;\n                }\n                this.timingRightStyle = '';\n                this.timingLeftStyle = '';\n                this.isCanDoAnswer = true;\n                this.gameStatus = 'prepare';\n                this.questionIndex = index;\n                this.currentQuestion = this.beginData[this.questionIndex];\n                this.isCorrect = '';\n                this.rivalAnswerStatus = '';\n                this.answerList = this.currentQuestion.options_list.map(a=>0);\n                var arr = this.currentQuestion.correct_list;\n                this.currentQuestion.correct_list = this.currentQuestion.options_list.map((a,i)=>{\n                    return arr.indexOf(i) > -1;\n                })\n                if(this.mode !== \"unlimited\"){\n                    var duration = (this.currentQuestion.max_duration || this.max_duration);\n                }\n                if(this.currentQuestion.audio){\n                    this.audioPreload(this.currentQuestion.audio);\n                    if(this.isIOS){\n                        duration += 4;\n                    }\n                }\n                this.questionTimer = setTimeout(()=>{\n                    this.gameStatus = 'start';\n                    this.beginTime = new Date().getTime();\n                    if(this.mode !== \"unlimited\"){\n                        this.timingCountDown(duration);\n                    }\n                    if(this.mode == 'level'){\n                        this.ruleitem = this.rule[Math.floor(this.questionIndex/5)];\n                    }\n                    if(this.mode == 'pk'){\n                        this.rivalTimer = setTimeout(()=>{\n                            this.rivalAnswerStatus = this.currentQuestion.rival_correct == 1 ? \"success\" : \"fail\"\n                            this.isBothAnswer(\"对手答题完毕\");\n                        },this.currentQuestion.rival_duration*1000)\n                    }\n                },1500)\n            },\n            /**\n            *   开始pk模式\n            */\n            gameEnd(){\n                console.log(\"game over\");\n                this.$api.answerEnd({\n                    batch_id : this.batch_id\n                }).then(res=>{\n                    this.gameStatus = 'end';\n                    this.isPkWin = res.data.score > 0;\n                    if(res.code==1){\n                        this.score = res.data.score;\n                    }else{\n                        this.$popup(res.msg);\n                    }\n                })\n            },\n            /**\n            *   点击答案选项\n            */\n            doAnswer(index){\n                if(!this.isCanDoAnswer){\n                    return;\n                }\n                var bool = this.answerList.some(a=>a);\n\n                if(this.currentQuestion.question_type == 'single'){\n                    if(!bool){\n                        this.answerList[index] = 1;\n                        this.endTime = new Date().getTime();\n                        var _bool = this.checkAnswerIsCorrect();\n                        // this.isCorrect = _bool ? \"success\" : \"fail\";\n                    }\n                }else{\n                    this.answerList[index] = !this.answerList[index];\n                }\n                if(this.mode == 'pk'){\n                    if(this.currentQuestion.question_type=='single'){\n                        var bool = this.checkAnswerIsCorrect();\n                        this.isCorrect = bool ? \"success\" : \"fail\";\n                        this.isBothAnswer(\"本人答题完毕\");\n                    }\n                }else{\n                    if(this.currentQuestion.question_type=='single'){\n                        this.checkAnswer();\n                    }\n                }\n                this.$forceUpdate();\n            },\n            manualAnswer(){\n                if(this.currentQuestion.question_type=='single'){\n                    return;\n                }\n                if(this.mode == 'pk'){\n                    this.endTime = new Date().getTime();\n                    var bool = this.checkAnswerIsCorrect();\n                    this.isCorrect = bool ? \"success\" : \"fail\";\n                    this.isBothAnswer(\"本人答题完毕\");\n                }else{\n                    this.checkAnswer();\n                }\n            },\n            /**\n            *   检查答题情况\n            */\n            checkAnswer(){\n                this.stopAudio();\n                this.isCanDoAnswer = false;\n                this.gameStatus = 'checking';\n                var bool = this.checkAnswerIsCorrect();\n                this.isCorrect = bool ? \"success\" : \"fail\";\n                if(this.mode == 'pk'){\n                    this.myScore+= bool ? this.rule.win_score : 0;\n                }\n                if(this.mode == 'unlimited'){\n                    this.myScore+= bool ? this.rule.one_correct_score : 0;\n                }\n                if(this.mode == 'level'){\n                    this.myScore+= bool ? this.ruleitem.level_score : 0;\n                }\n                this.rivalScore += this.currentQuestion.rival_correct == 1 ? this.rule.win_score : 0;\n                this.wrongCount += bool ? 0 : 1;\n                this.correctCount += bool ? 1 : 0;\n                clearInterval(this.countdownTimer);\n                this.countdownTimer = null;\n                this.isRotate = false;\n                this.questionReply();\n                \n                var isLevelWrong = this.mode == 'level' && this.wrongCount > 0;\n                \n                this.checkAnswerTimer = setTimeout(()=>{\n                    if(isLevelWrong){\n                        this.gameEnd();\n                        return;\n                    }\n                    if(this.questionIndex%5==4 && this.mode == 'level'){\n                        this.gameStatus = \"end\";\n                        this.isPkWin = true;\n                        this.score = this.correctCount * this.ruleitem.level_score;\n                        return;\n                    }\n                    var index = this.questionIndex+1;\n                    if(this.mode == 'unlimited' && this.wrongCount >= 3){\n                        this.gameEnd();\n                    }else{\n                        this.beginGame(index);\n                    }\n                },2000)\n                \n            },\n            /**\n            *   检查我的答案是否正确\n            */\n            checkAnswerIsCorrect(){\n                var a_length = this.answerList.filter(a=>a).length;\n                var c_length = this.currentQuestion.correct_list.filter(a=>a).length;\n                var is = this.currentQuestion.correct_list.every((a,i)=>{\n                    return !!a == !!this.answerList[i];\n                })\n                return a_length==c_length && is;\n            },\n            /**\n            *   PK模式下 检查双方是否都已经答题完毕\n            */\n            isBothAnswer(msg){\n                console.log(msg,this.isCorrect,this.rivalAnswerStatus,this.myScore)\n                \n                if(this.isCorrect && this.rivalAnswerStatus){\n                    this.stopAudio();\n                    clearInterval(this.countdownTimer);\n                    this.countdownTimer = null;\n                    this.isRotate = false;\n                    this.isCanDoAnswer = false;\n                    this.gameStatus = 'checking';\n                    this.myScore+= this.isCorrect=='success' ? this.rule.win_score : 0;\n                    this.rivalScore += this.currentQuestion.rival_correct == 1 ? this.rule.win_score : 0;\n                    this.questionReply();\n                    this.gameTimer = setTimeout(()=>{\n                        this.beginGame(this.questionIndex+1);\n                    },2000)\n                }else if(this.isCorrect){\n                    this.gameStatus = 'checking';\n                }\n            },\n            /**\n            *   音频loadedmetadata事件\n            */\n            loadedmetadata(){\n                var audio = document.getElementById(\"qa-audio\");\n                this.currentQuestion.duration = audio.duration;\n            },\n            /**\n            *   预加载音频\n            */\n            audioPreload(audioSrc){\n                this.$nextTick(()=>{\n                    var audio = document.getElementById(\"qa-audio\");\n                    if(!audio){return;}\n                    audioSrc.forEach(src=>{\n                        var source = document.createElement(\"source\");\n                        var type = src.split(\".\")[1];\n                        source.type = type == \"ogg\" ? \"audio/ogg\" : \"audio/mpeg\";\n                        source.src = this.baseUrl + src;\n                        audio.appendChild(source);\n                    })\n                    audio.addEventListener(\"loadedmetadata\",this.loadedmetadata,true)\n                    audio.load();\n                })\n                \n            },\n            /**\n            *   播放音频\n            */\n            playAudio(){\n                this.audioPlaying = true;\n                var audio = document.getElementById(\"qa-audio\");\n                audio.play();\n                audio.removeEventListener(\"loadedmetadata\",this.loadedmetadata,true)\n            },\n            /**\n            *   停止播放音频\n            */\n            stopAudio(){\n                var audio = document.getElementById(\"qa-audio\");\n                audio.pause();\n                audio.currentTime = 0;\n                this.audioPlaying = false;\n            },\n            bindAudioEvent(){\n                setTimeout(()=>{\n                    var audio = document.getElementById(\"qa-audio\");\n                    audio.addEventListener(\"ended\",()=>{\n                        this.audioPlaying = false;\n                    })\n                },1000)\n            },\n            /**\n            *   答题倒计时\n            */\n            timingCountDown(time){\n                this.timingCount = time;\n                var t = Number(time) *5;\n                var count = 0;\n                this.countdownTimer = setInterval(()=>{\n                    count++;\n                    if(count % 10 == 0){\n                        this.timingCount--;\n                    }\n                    if(count<=t){\n                        this.timingRightStyle = `transform: rotate(${180/t*count-45}deg)`;\n                    }else{\n                        this.timingLeftStyle = `transform: rotate(${180/t*(count-t)-45}deg)`;\n                    }\n                    if(this.timingCount<=0){\n                        clearInterval(this.countdownTimer);\n                        this.countdownTimer = null;\n                        this.isRotate = false;\n                        this.checkAnswer();\n                    }\n                },100)\n            },\n            \n            nextLevel(){\n                this.correctCount = 0;\n                this.beginGame(this.questionIndex+1);\n            },\n            /**\n            *   答题完一题进行上报\n            */\n            questionReply(){\n                var duration = ((this.endTime||new Date().getTime()) - this.beginTime)/1000;\n                var selecteds = this.answerList.map((a,i)=>{\n                        return a ? String(i) : '';\n                    }).filter(a=>a);\n                var param = {\n                    batch_id : this.batch_id,\n                    question_id : this.currentQuestion.id,\n                    selecteds : selecteds,\n                    duration : duration\n                }\n                if(!selecteds.length){\n                    param.selecteds['0'] = '';\n                }\n                this.$api.questionReply(param)\n            },\n            /**\n            *   再来一局\n            */\n            oneMoreTry(){\n                this.init();\n            },\n            /**\n            *   返回\n            */\n            goBack(){\n                this.$router.go(-1);\n            },\n            /**\n            *   清除定时器\n            */\n            destroyTimer(){\n                clearTimeout(this.consumingTimer);\n                clearTimeout(this.countdownTimer);\n                clearTimeout(this.questionTimer);\n                clearTimeout(this.rivalTimer);\n                clearTimeout(this.gameTimer);\n                clearTimeout(this.checkAnswerTimer);\n                this.consumingTimer = null;\n                this.countdownTimer = null;\n                this.questionTimer = null;\n                this.rivalTimer = null;\n                this.gameTimer = null;\n                this.checkAnswerTimer = null;\n            }\n\n        },\n        beforeDestroy(){\n            this.destroyTimer();\n        },\n        watch:{\n            consuming(v){\n                var m = v - v % 60,\n                    s = v - m * 60;\n                m = m < 10 ? (\"0\"+m) : m;\n                s = s < 10 ? (\"0\"+s) : s;\n                this.consumingText = m + \":\" + s;\n            }\n        },\n        filters : {\n            duration2str(v){\n                v = Math.ceil(v);\n                var h = Math.floor(v/3600),\n                    m = Math.floor((v - h * 3600)/60),\n                    s = v - m * 60 - h * 3600;\n                m = m < 10 ? (\"0\"+m) : m;\n                s = s < 10 ? (\"0\"+s) : s;\n                if(h){\n                    return (h < 10 ? (\"0\"+h) : h)\n                }else{\n                    return m + \":\" + s;\n                }\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/game.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game-wrap\"},[(_vm.mode=='pk' && _vm.gameStatus == 'matching')?_c('div',{staticClass:\"matching\"},[_c('div',{staticClass:\"matching-animate\"},[_c('div',{staticClass:\"user\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-2\"}),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-3\"}),_vm._v(\" \"),(!_vm.matching)?_c('div',{staticClass:\"rival\"},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]):_vm._e()]),_vm._v(\" \"),(_vm.matching)?_c('div',{staticClass:\"matching-consuming\"},[_vm._v(\"正在匹配 \"+_vm._s(_vm.consumingText))]):_c('div',{staticClass:\"matching-consuming\"},[_vm._v(\"匹配完成\")]),_vm._v(\" \"),(_vm.matching)?_c('div',{staticClass:\"matching-btn matching-btn-cancel\",on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")]):_c('div',{staticClass:\"matching-btn matching-btn-done\"},[_vm._v(\"正在进入\")])]):_vm._e(),_vm._v(\" \"),(_vm.gameStatus !== 'matching' && _vm.gameStatus!=='end')?_c('div',{staticClass:\"game-container\"},[_c('div',{staticClass:\"game-player\"},[_c('div',{staticClass:\"game-player-self\"},[_c('div',{staticClass:\"game-player-score\"},[_vm._v(_vm._s(_vm.myScore))]),_vm._v(\" \"),_c('div',{class:['game-player-avatar',{success:_vm.isCorrect=='success'},{fail:_vm.isCorrect=='fail'}]},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})])]),_vm._v(\" \"),(_vm.mode=='pk')?_c('div',{staticClass:\"game-player-rival\"},[_c('div',{class:['game-player-avatar',_vm.rivalAnswerStatus]},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"game-player-score\"},[_vm._v(_vm._s(_vm.rivalScore))])]):_vm._e(),_vm._v(\" \"),((_vm.gameStatus=='start' || _vm.gameStatus=='checking') && _vm.mode!=='unlimited')?_c('div',{staticClass:\"game-timing\"},[_c('div',{staticClass:\"game-timing-left\"},[_c('i',{class:{rotate:_vm.isRotate},style:(_vm.timingLeftStyle)})]),_vm._v(\" \"),_c('div',{staticClass:\"game-timing-right\"},[_c('i',{class:{rotate:_vm.isRotate},style:(_vm.timingRightStyle)})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.timingCount))])]):_vm._e(),_vm._v(\" \"),((_vm.gameStatus=='start' || _vm.gameStatus=='checking') && _vm.mode=='unlimited')?_c('div',{staticClass:\"game-remaining\"},[_c('i',{class:{grey:_vm.wrongCount>0}}),_vm._v(\" \"),_c('i',{class:{grey:_vm.wrongCount>1}}),_vm._v(\" \"),_c('i',{class:{grey:_vm.wrongCount>2}})]):_vm._e()]),_vm._v(\" \"),(_vm.gameStatus=='prepare')?_c('div',{class:['game-question-type',_vm.currentQuestion.question_type]},[_c('label',[_vm._v(\"第\"+_vm._s(_vm.questionIndex+1)+\"题\")]),_vm._v(\" \"),_c('div',{staticClass:\"q-type\"},[_vm._v(_vm._s(_vm.currentQuestion.question_type == \"single\" ? \"单选题\" : \"多选题\"))])]):_vm._e(),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),(_vm.gameStatus=='start' || _vm.gameStatus=='checking')?_c('div',{staticClass:\"game-qa\"},[_c('div',{staticClass:\"game-question\"},[_vm._v(\"\\n                \"+_vm._s(_vm.currentQuestion.title)+\"\\n                \"),(_vm.currentQuestion.image)?_c('img',{attrs:{\"src\":_vm.currentQuestion.image}}):_vm._e(),_vm._v(\" \"),(_vm.currentQuestion.audio)?_c('div',{staticClass:\"game-q-audio\",class:{playing:_vm.audioPlaying},on:{\"click\":_vm.playAudio}},[_c('span',[_vm._v(_vm._s(_vm._f(\"duration2str\")(_vm.currentQuestion.duration)))]),_c('span',[_vm._v(_vm._s(_vm.isIOS ? \"  点击播放\":\"\"))])]):_vm._e()]),_vm._v(\" \"),_c('ul',{staticClass:\"game-answer-list\"},_vm._l((_vm.currentQuestion.options_list),function(q,i){return _c('li',{key:i,class:{\n                        choose : _vm.answerList[i]==1,\n                        correct: _vm.currentQuestion.correct_list[i] && _vm.gameStatus=='checking',\n                        success: _vm.currentQuestion.correct_list[i] && _vm.answerList[i]==1 && _vm.gameStatus=='checking',\n                        fail : !_vm.currentQuestion.correct_list[i] && _vm.answerList[i]==1 && _vm.gameStatus=='checking'\n                    },on:{\"click\":function($event){return _vm.doAnswer(i)}}},[_vm._v(_vm._s(q))])}),0),_vm._v(\" \"),(_vm.gameStatus=='checking')?_c('div',{class:['game-answer-result',_vm.isCorrect ? _vm.isCorrect : '']},[(_vm.isCorrect=='fail')?_c('span',[_vm._v(\"很遗憾，回答错误\")]):_vm._e(),_vm._v(\" \"),(_vm.isCorrect=='success')?_c('span',[_vm._v(\"恭喜您，回答正确\")]):_vm._e()]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.currentQuestion.question_type != 'single' && _vm.gameStatus=='start')?_c('div',{staticStyle:{\"height\":\"1.86rem\"}}):_vm._e(),_vm._v(\" \"),(_vm.currentQuestion.question_type != 'single' && _vm.gameStatus=='start')?_c('div',{staticClass:\"mulit-btn\",on:{\"click\":_vm.manualAnswer}},[_vm._v(\"确定\")]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.gameStatus == 'end')?_c('div',{class:['layer-pk-mode',_vm.isPkWin?'success':'fail']},[_c('div',{staticClass:\"gameover-result-title\"},[_vm._v(_vm._s(_vm.isPkWin?\"胜利\":\"失败\"))]),_vm._v(\" \"),_c('div',{staticClass:\"gameover-result-content\"},[(_vm.mode == 'pk')?_c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"myself\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.myScore))])]),_vm._v(\" \"),_c('div',{staticClass:\"rival\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.rivalScore))])])]):_c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_vm._m(1)]),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('div',{staticClass:\"game-score-count\"},[_vm._v(\"积分+\"+_vm._s(_vm.score))]),_vm._v(\" \"),_c('div',{staticClass:\"gameover-btns\"},[_c('a',{staticClass:\"goback\",on:{\"click\":_vm.goBack}},[_vm._v(\"返回\")]),_vm._v(\" \"),(_vm.mode!='level')?_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.oneMoreTry()}}},[_vm._v(\"再来一局\")]):_vm._e(),_vm._v(\" \"),(_vm.mode=='level' && _vm.gameStatus == 'end' && (_vm.questionIndex==_vm.beginData.length-1 || (_vm.questionIndex<_vm.beginData.length-1 && !_vm.isPkWin)))?_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.oneMoreTry()}}},[_vm._v(\"再来一局\")]):_vm._e(),_vm._v(\" \"),(_vm.mode=='level' && _vm.gameStatus == 'end' && _vm.questionIndex<_vm.beginData.length-1 && _vm.isPkWin)?_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.nextLevel()}}},[_vm._v(\"下一关\")]):_vm._e()])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('audio',{attrs:{\"id\":\"qa-audio\",\"preload\":\"preload\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myself\"},[_c('div',{staticClass:\"avatar\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"game-this-round\"},[_c('em',[_vm._v(\"本局奖励\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-35b9b8fc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/game.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-35b9b8fc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./game.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./game.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./game.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-35b9b8fc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./game.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/game.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}