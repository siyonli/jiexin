{"version":3,"sources":["webpack:///src/components/game.vue","webpack:///./src/components/game.vue?3b51","webpack:///./src/components/game.vue"],"names":["components_game","data","baseUrl","mode","this","$route","query","matching","rival","rule","batch_id","myScore","rivalScore","score","consuming","consumingText","max_duration","userInfo","beginTime","endTime","cacheData","beginData","gameStatus","timingLeftStyle","timingRightStyle","isRotate","timingCount","consumingTimer","countdownTimer","questionTimer","rivalTimer","gameTimer","checkAnswerTimer","currentQuestion","questionIndex","isCorrect","answerList","isCanDoAnswer","isPkWin","audioSrc","rivalAnswerStatus","correctCount","wrongCount","audioPlaying","created","u","navigator","userAgent","isIOS","match","init","methods","destroyTimer","begin","_this","setInterval","$api","answerBegin","then","res","code","answerBeginHandle","$popup","msg","goBack","getQuestion","clearInterval","_this2","length","beginGame","bindAudioEvent","index","_this3","gameEnd","options_list","map","a","arr","correct_list","i","indexOf","duration","audio","audioPreload","setTimeout","Date","getTime","timingCountDown","ruleitem","Math","floor","rival_correct","isBothAnswer","rival_duration","_this4","console","log","answerEnd","doAnswer","bool","some","question_type","_bool","checkAnswerIsCorrect","filter","checkAnswer","$forceUpdate","_this5","a_length","c_length","is","every","_this6","stopAudio","win_score","questionReply","loadedmetadata","document","getElementById","_this7","forEach","src","source","createElement","type","split","appendChild","addEventListener","load","playAudio","play","removeEventListener","pause","currentTime","_this8","time","_this9","t","Number","count","_this10","one_correct_score","level_score","nextLevel","selecteds","String","param","question_id","id","oneMoreTry","$router","go","clearTimeout","beforeDestroy","watch","v","m","s","filters","duration2str","ceil","selectortype_template_index_0_src_components_game","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","avatar","_v","_e","_s","on","click","class","success","fail","rotate","style","grey","_m","title","image","playing","_f","_l","q","key","choose","correct","$event","staticStyle","overflow","staticRenderFns","display","preload","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.8b1f63dc6d4db05f58e5.js","sourcesContent":["<template>\n    <div class=\"game-wrap\">\n        <div class=\"matching\" v-if=\"mode=='pk' && gameStatus == 'matching'\">\n            <div class=\"matching-animate\">\n                <div class=\"user\">\n                    <img :src=\"userInfo.avatar\">\n                </div>\n                <div class=\"matching-planet matching-planet-1\"></div>\n                <div class=\"matching-planet matching-planet-2\"></div>\n                <div class=\"matching-planet matching-planet-3\"></div>\n                <div class=\"rival\" v-if=\"!matching\">\n                    <img :src=\"rival.avatar\">\n                </div>\n            </div>\n            <div class=\"matching-consuming\" v-if=\"matching\">正在匹配 {{consumingText}}</div>\n            <div class=\"matching-consuming\" v-else>匹配完成</div>\n            <div class=\"matching-btn matching-btn-cancel\" v-if=\"matching\" @click=\"goBack\">取消</div>\n            <div class=\"matching-btn matching-btn-done\" v-else>正在进入</div>\n        </div>\n\n        <div class=\"game-container\" v-if=\"gameStatus !== 'matching' && gameStatus!=='end'\">\n            <div class=\"game-player\">\n                <div class=\"game-player-self\">\n                    <div class=\"game-player-score\">{{myScore}}</div>\n                    <div :class=\"['game-player-avatar',{success:isCorrect=='success'},{fail:isCorrect=='fail'}]\">\n                        <img :src=\"userInfo.avatar\">\n                    </div>\n                </div>\n                <div class=\"game-player-rival\" v-if=\"mode=='pk'\">\n                    <div :class=\"['game-player-avatar',rivalAnswerStatus]\">\n                        <img :src=\"rival.avatar\">\n                    </div>\n                    <div class=\"game-player-score\">{{rivalScore}}</div>\n                </div>\n                <div class=\"game-timing\" v-if=\"(gameStatus=='start' || gameStatus=='checking') && mode!=='unlimited'\">\n                    <div class=\"game-timing-left\"><i :class=\"{rotate:isRotate}\" :style=\"timingLeftStyle\"></i></div>\n                    <div class=\"game-timing-right\"><i :class=\"{rotate:isRotate}\" :style=\"timingRightStyle\"></i></div>\n                    <span>{{timingCount}}</span>\n                </div>\n                <div class=\"game-remaining\" v-if=\"(gameStatus=='start' || gameStatus=='checking') && mode=='unlimited'\">\n                    <i :class=\"{grey:wrongCount>0}\"></i>\n                    <i :class=\"{grey:wrongCount>1}\"></i>\n                    <i :class=\"{grey:wrongCount>2}\"></i>\n                </div>\n            </div>\n            <div :class=\"['game-question-type',currentQuestion.question_type]\" v-if=\"gameStatus=='prepare'\">\n                <label>第{{questionIndex+1}}题</label>\n                <div class=\"q-type\">{{currentQuestion.question_type == \"single\" ? \"单选题\" : \"多选题\"}}</div>\n            </div>\n            <div style=\"display: none;\">\n                <audio id=\"qa-audio\" preload=\"preload\"></audio>\n            </div>\n            <div class=\"game-qa\" v-if=\"gameStatus=='start' || gameStatus=='checking'\">\n                <div class=\"game-question\">\n                    {{currentQuestion.title}}\n                    <img v-if=\"currentQuestion.image\" :src=\"currentQuestion.image\">\n                    <div class=\"game-q-audio\" :class=\"{playing:audioPlaying}\" @click=\"playAudio\" v-if=\"currentQuestion.audio\">\n                        <span>{{currentQuestion.duration|duration2str}}</span><span>{{isIOS ? \"  点击播放\":\"\"}}</span>\n                    </div>\n                </div>\n                <ul class=\"game-answer-list\">\n                    <li v-for=\"(q,i) in currentQuestion.options_list\" :key=\"i\" @click=\"doAnswer(i)\"\n                        :class=\"{\n                            choose : answerList[i]==1,\n                            correct: currentQuestion.correct_list[i] && gameStatus=='checking',\n                            success: currentQuestion.correct_list[i] && answerList[i]==1 && gameStatus=='checking',\n                            fail : !currentQuestion.correct_list[i] && answerList[i]==1 && gameStatus=='checking'\n                        }\"\n                    >{{q}}</li>\n                </ul>\n                <div :class=\"['game-answer-result',isCorrect ? isCorrect : '']\" v-if=\"gameStatus=='checking'\">\n                    <span v-if=\"isCorrect=='fail'\">很遗憾，回答错误</span>\n                    <span v-if=\"isCorrect=='success'\">恭喜您，回答正确</span>\n                </div>\n            </div>\n        </div>\n\n        <div :class=\"['layer-pk-mode',isPkWin?'success':'fail']\" v-if=\"gameStatus == 'end'\">\n            <div class=\"gameover-result-title\">{{isPkWin?\"胜利\":\"失败\"}}</div>\n            <div class=\"gameover-result-content\">\n                <div style=\"overflow: hidden;\" v-if=\"mode == 'pk'\">\n                    <div class=\"myself\">\n                        <div class=\"avatar\"><img :src=\"userInfo.avatar\"></div>\n                        <div class=\"score\">{{myScore}}</div>\n                    </div>\n                    <div class=\"rival\">\n                        <div class=\"avatar\"><img :src=\"rival.avatar\"></div>\n                        <div class=\"score\">{{rivalScore}}</div>\n                    </div>\n                </div>\n                <div style=\"overflow: hidden;\" v-else>\n                    <div class=\"myself\">\n                        <div class=\"avatar\"></div>\n                    </div>\n                </div>\n                <label class=\"game-this-round\"><em>本局奖励</em></label>\n                <div class=\"game-score-count\">积分+{{score}}</div>\n                <div class=\"gameover-btns\">\n                    <a class=\"goback\" @click=\"goBack\">返回</a>\n                    <a class=\"try-again\" @click=\"oneMoreTry()\" v-if=\"mode!='level'\">再来一局</a>\n                    <a class=\"try-again\" \n                    @click=\"oneMoreTry()\" \n                    v-if=\"mode=='level' && gameStatus == 'end' && (questionIndex==beginData.length-1 || (questionIndex<beginData.length-1 && !isPkWin))\" \n                    >再来一局</a>\n                    <a class=\"try-again\" @click=\"nextLevel()\" v-if=\"mode=='level' && gameStatus == 'end' && questionIndex<beginData.length-1 && isPkWin\" >下一关</a>\n                </div>\n            </div>\n            \n        </div>\n\n\n    </div>\n</template>\n\n<script>\n    import '../assets/scss/game.scss'\n    export default {\n        data() {\n            return {\n                baseUrl : \"http://ask.dxytg.com\",\n                mode : this.$route.query.mode || \"pk\",      //模式\n                matching : true,                    //匹配状态 true匹配中\n                rival : {},                          //对手  \n                rule : {}, \n                batch_id : 0,\n                myScore : 0,\n                rivalScore : 0,\n                score : 0,\n                consuming : 0,                      //耗时\n                consumingText : '00:00',            //耗时\n                max_duration : 20,\n                userInfo : {},\n                beginTime : '',\n                endTime : '',\n                cacheData : {},\n                beginData : {},\n                gameStatus : 'matching',            //游戏状态 matching 匹配中 prepare 准备 start 开始 checking 检查答案 end 结束\n                timingLeftStyle : '',\n                timingRightStyle : '',\n                isRotate : false,\n                timingCount : 10,\n                consumingTimer : null,\n                countdownTimer : null,\n                questionTimer : null,\n                rivalTimer : null,\n                gameTimer : null,\n                checkAnswerTimer : null,\n                currentQuestion : {},\n                questionIndex : 0,\n                isCorrect : '',\n                answerList : [],\n                isCanDoAnswer : true,\n                isPkWin : false,\n                audioSrc : false,\n                rivalAnswerStatus : '',\n                correctCount : 0,\n                wrongCount : 0,\n                audioPlaying : false\n            }\n        },\n        created() {\n            var u = navigator.userAgent;\n            this.isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n            this.init();\n        },\n        methods: {\n            init(){\n                this.destroyTimer();\n                this.matching = true;\n                this.gameStatus = 'matching';\n                this.isCanDoAnswer = true;\n                this.beginData = [];\n                this.questionIndex = 0;\n                this.timingLeftStyle = '';\n                this.timingRightStyle = '';\n                this.consuming = 0;\n                this.myScore = 0;\n                this.rivalScore = 0;\n                this.isCorrect= '';\n                this.rivalAnswerStatus = '';\n                this.wrongCount = 0;\n                this.begin();\n            },\n            /** 开始 **/\n            begin(){\n                if(this.mode == 'pk'){\n                    this.consumingTimer = setInterval(()=>{\n                        this.consuming++;\n                    },1000)\n                }\n                this.$api.answerBegin({\n                    mode : this.mode\n                }).then(res=>{\n                    if(res.code == 1){\n                        this.answerBeginHandle(res.data);\n                    }else{\n                        this.$popup(res.msg);\n                        this.goBack();\n                    }\n                })\n            },\n            answerBeginHandle(data){\n                this.rival = data.rival;\n                this.rule = data.rule;\n                this.batch_id = data.batch_id;\n                this.getQuestion(data.batch_id);\n                clearInterval(this.consumingTimer);\n                this.consumingTimer = null;\n            },\n            /**\n            *   获取问题列表\n            */\n            getQuestion(batch_id){\n                this.$api.getQuestion({\n                    batch_id : batch_id\n                }).then(res=>{\n                    if(res.code == 1 && res.data.length){\n                        this.beginData = res.data;\n                        this.beginGame(0);\n                        this.bindAudioEvent();\n                    }else{\n                        this.$popup(res.msg || \"服务器数据出错\");\n                        this.goBack();\n                    }\n                })\n            },\n            beginGame(index){\n                if(index >= this.beginData.length){\n                    this.gameEnd();\n                    return;\n                }\n                this.timingRightStyle = '';\n                this.timingLeftStyle = '';\n                this.isCanDoAnswer = true;\n                this.gameStatus = 'prepare';\n                this.questionIndex = index;\n                this.currentQuestion = this.beginData[this.questionIndex];\n                this.isCorrect = '';\n                this.rivalAnswerStatus = '';\n                this.answerList = this.currentQuestion.options_list.map(a=>0);\n                var arr = this.currentQuestion.correct_list;\n                this.currentQuestion.correct_list = this.currentQuestion.options_list.map((a,i)=>{\n                    return arr.indexOf(i) > -1;\n                })\n                if(this.mode !== \"unlimited\"){\n                    var duration = (this.currentQuestion.max_duration || this.max_duration);\n                }\n                if(this.currentQuestion.audio){\n                    this.audioPreload(this.currentQuestion.audio);\n                    if(this.isIOS){\n                        duration += 4;\n                    }\n                }\n                this.questionTimer = setTimeout(()=>{\n                    this.gameStatus = 'start';\n                    this.beginTime = new Date().getTime();\n                    if(this.mode !== \"unlimited\"){\n                        this.timingCountDown(duration);\n                    }\n                    if(this.mode == 'level'){\n                        this.ruleitem = this.rule[Math.floor(this.questionIndex/5)];\n                    }\n                    if(this.mode == 'pk'){\n                        this.rivalTimer = setTimeout(()=>{\n                            this.rivalAnswerStatus = this.currentQuestion.rival_correct == 1 ? \"success\" : \"fail\"\n                            this.isBothAnswer(\"对手答题完毕\");\n                        },this.currentQuestion.rival_duration*1000)\n                    }\n                },1500)\n            },\n            /**\n            *   开始pk模式\n            */\n            gameEnd(){\n                console.log(\"game over\");\n                this.$api.answerEnd({\n                    batch_id : this.batch_id\n                }).then(res=>{\n                    this.gameStatus = 'end';\n                    this.isPkWin = res.data.score > 0;\n                    if(res.code==1){\n                        this.score = res.data.score;\n                    }else{\n                        this.$popup(res.msg);\n                    }\n                })\n            },\n            /**\n            *   点击答案选项\n            */\n            doAnswer(index){\n                if(!this.isCanDoAnswer){\n                    return;\n                }\n                var bool = this.answerList.some(a=>a);\n\n                if(this.currentQuestion.question_type == 'single'){\n                    if(!bool){\n                        this.answerList[index] = 1;\n                        this.endTime = new Date().getTime();\n                        var _bool = this.checkAnswerIsCorrect();\n                        this.isCorrect = _bool ? \"success\" : \"fail\";\n                    }\n                }else{\n                    this.answerList[index] = !this.answerList[index];\n                    var length = this.answerList.filter(a=>a).length;\n                    var corrleng = this.currentQuestion.correct_list.filter(a=>a).length;\n                    if(length == corrleng){\n                        this.endTime = new Date().getTime();\n                        var bool = this.checkAnswerIsCorrect();\n                        this.isCorrect = bool ? \"success\" : \"fail\";\n                    }\n                }\n                if(this.mode == 'pk'){\n                    this.isBothAnswer(\"本人答题完毕\");\n                }else{\n                    this.checkAnswer();\n                }\n                this.$forceUpdate();\n            },\n            /**\n            *   检查我的答案是否正确\n            */\n            checkAnswerIsCorrect(){\n                var a_length = this.answerList.filter(a=>a).length;\n                var c_length = this.currentQuestion.correct_list.filter(a=>a).length;\n                var is = this.currentQuestion.correct_list.every((a,i)=>{\n                    return !!a == !!this.answerList[i];\n                })\n                return a_length==c_length && is;\n            },\n            /**\n            *   PK模式下 检查双方是否都已经答题完毕\n            */\n            isBothAnswer(msg){\n                console.log(msg,this.isCorrect,this.rivalAnswerStatus,this.myScore)\n                \n                if(this.isCorrect && this.rivalAnswerStatus){\n                    this.stopAudio();\n                    clearInterval(this.countdownTimer);\n                    this.countdownTimer = null;\n                    this.isRotate = false;\n                    this.isCanDoAnswer = false;\n                    this.gameStatus = 'checking';\n                    this.myScore+= this.isCorrect=='success' ? this.rule.win_score : 0;\n                    this.rivalScore += this.currentQuestion.rival_correct == 1 ? this.rule.win_score : 0;\n                    this.questionReply();\n                    this.gameTimer = setTimeout(()=>{\n                        this.beginGame(this.questionIndex+1);\n                    },2000)\n                }else if(this.isCorrect){\n                    this.gameStatus = 'checking';\n                }\n            },\n            /**\n            *   音频loadedmetadata事件\n            */\n            loadedmetadata(){\n                var audio = document.getElementById(\"qa-audio\");\n                this.currentQuestion.duration = audio.duration;\n            },\n            /**\n            *   预加载音频\n            */\n            audioPreload(audioSrc){\n                var audio = document.getElementById(\"qa-audio\");\n                if(!audio){return;}\n                audioSrc.forEach(src=>{\n                    var source = document.createElement(\"source\");\n                    var type = src.split(\".\")[1];\n                    source.type = type == \"ogg\" ? \"audio/ogg\" : \"audio/mpeg\";\n                    source.src = this.baseUrl + src;\n                    audio.appendChild(source);\n                })\n                audio.addEventListener(\"loadedmetadata\",this.loadedmetadata,true)\n                audio.load();\n            },\n            /**\n            *   播放音频\n            */\n            playAudio(){\n                this.audioPlaying = true;\n                var audio = document.getElementById(\"qa-audio\");\n                audio.play();\n                audio.removeEventListener(\"loadedmetadata\",this.loadedmetadata,true)\n            },\n            /**\n            *   停止播放音频\n            */\n            stopAudio(){\n                var audio = document.getElementById(\"qa-audio\");\n                audio.pause();\n                audio.currentTime = 0;\n                this.audioPlaying = false;\n            },\n            bindAudioEvent(){\n                setTimeout(()=>{\n                    var audio = document.getElementById(\"qa-audio\");\n                    audio.addEventListener(\"ended\",()=>{\n                        this.audioPlaying = false;\n                    })\n                },1000)\n            },\n            /**\n            *   答题倒计时\n            */\n            timingCountDown(time){\n                this.timingCount = time;\n                var t = Number(time) *5;\n                var count = 0;\n                this.countdownTimer = setInterval(()=>{\n                    count++;\n                    if(count % 10 == 0){\n                        this.timingCount--;\n                    }\n                    if(count<=t){\n                        this.timingRightStyle = `transform: rotate(${180/t*count-45}deg)`;\n                    }else{\n                        this.timingLeftStyle = `transform: rotate(${180/t*(count-t)-45}deg)`;\n                    }\n                    if(this.timingCount<=0){\n                        clearInterval(this.countdownTimer);\n                        this.countdownTimer = null;\n                        this.isRotate = false;\n                        this.checkAnswer();\n                    }\n                },100)\n            },\n            /**\n            *   检查答题情况\n            */\n            checkAnswer(){\n                this.isCanDoAnswer = false;\n                this.gameStatus = 'checking';\n                var bool = this.checkAnswerIsCorrect();\n                this.isCorrect = bool ? \"success\" : \"fail\";\n                if(this.mode == 'pk'){\n                    this.myScore+= bool ? this.rule.win_score : 0;\n                }\n                if(this.mode == 'unlimited'){\n                    this.myScore+= bool ? this.rule.one_correct_score : 0;\n                }\n                if(this.mode == 'level'){\n                    this.myScore+= bool ? this.ruleitem.level_score : 0;\n                }\n                this.rivalScore += this.currentQuestion.rival_correct == 1 ? this.rule.win_score : 0;\n                this.wrongCount += bool ? 0 : 1;\n                this.correctCount += bool ? 1 : 0;\n                clearInterval(this.countdownTimer);\n                this.countdownTimer = null;\n                this.isRotate = false;\n                this.questionReply();\n                \n                if(this.questionIndex%5==4 && this.mode == 'level'){\n                    setTimeout(()=>{\n                        this.gameStatus = \"end\";\n                        this.isPkWin = this.correctCount>=3;\n                        this.score = this.correctCount * this.ruleitem.level_score;\n                    },2000)\n                }else{\n                    this.checkAnswerTimer = setTimeout(()=>{\n                        var index = this.questionIndex+1;\n                        if(this.mode == 'unlimited' && this.wrongCount >= 3){\n                            this.gameEnd();\n                        }else{\n                            this.beginGame(index);\n                        }\n                    },2000)\n                }\n                \n            },\n            nextLevel(){\n                this.correctCount = 0;\n                this.beginGame(this.questionIndex+1);\n            },\n            /**\n            *   答题完一题进行上报\n            */\n            questionReply(){\n                var duration = ((this.endTime||new Date().getTime()) - this.beginTime)/1000;\n                var selecteds = this.answerList.map((a,i)=>{\n                        return a ? String(i) : '';\n                    }).filter(a=>a);\n                var param = {\n                    batch_id : this.batch_id,\n                    question_id : this.currentQuestion.id,\n                    selecteds : selecteds,\n                    duration : duration\n                }\n                if(!selecteds.length){\n                    param.selecteds['0'] = '';\n                }\n                this.$api.questionReply(param)\n            },\n            /**\n            *   再来一局\n            */\n            oneMoreTry(){\n                this.init();\n            },\n            /**\n            *   返回\n            */\n            goBack(){\n                this.$router.go(-1);\n            },\n            /**\n            *   清除定时器\n            */\n            destroyTimer(){\n                clearTimeout(this.consumingTimer);\n                clearTimeout(this.countdownTimer);\n                clearTimeout(this.questionTimer);\n                clearTimeout(this.rivalTimer);\n                clearTimeout(this.gameTimer);\n                clearTimeout(this.checkAnswerTimer);\n                this.consumingTimer = null;\n                this.countdownTimer = null;\n                this.questionTimer = null;\n                this.rivalTimer = null;\n                this.gameTimer = null;\n                this.checkAnswerTimer = null;\n            }\n\n        },\n        beforeDestroy(){\n            this.destroyTimer();\n        },\n        watch:{\n            consuming(v){\n                var m = v - v % 60,\n                    s = v - m * 60;\n                m = m < 10 ? (\"0\"+m) : m;\n                s = s < 10 ? (\"0\"+s) : s;\n                this.consumingText = m + \":\" + s;\n            }\n        },\n        filters : {\n            duration2str(v){\n                v = Math.ceil(v);\n                var m = v - v % 60,\n                    s = v - m * 60;\n                m = m < 10 ? (\"0\"+m) : m;\n                s = s < 10 ? (\"0\"+s) : s;\n                return m + \":\" + s;\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/game.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game-wrap\"},[(_vm.mode=='pk' && _vm.gameStatus == 'matching')?_c('div',{staticClass:\"matching\"},[_c('div',{staticClass:\"matching-animate\"},[_c('div',{staticClass:\"user\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-2\"}),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-3\"}),_vm._v(\" \"),(!_vm.matching)?_c('div',{staticClass:\"rival\"},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]):_vm._e()]),_vm._v(\" \"),(_vm.matching)?_c('div',{staticClass:\"matching-consuming\"},[_vm._v(\"正在匹配 \"+_vm._s(_vm.consumingText))]):_c('div',{staticClass:\"matching-consuming\"},[_vm._v(\"匹配完成\")]),_vm._v(\" \"),(_vm.matching)?_c('div',{staticClass:\"matching-btn matching-btn-cancel\",on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")]):_c('div',{staticClass:\"matching-btn matching-btn-done\"},[_vm._v(\"正在进入\")])]):_vm._e(),_vm._v(\" \"),(_vm.gameStatus !== 'matching' && _vm.gameStatus!=='end')?_c('div',{staticClass:\"game-container\"},[_c('div',{staticClass:\"game-player\"},[_c('div',{staticClass:\"game-player-self\"},[_c('div',{staticClass:\"game-player-score\"},[_vm._v(_vm._s(_vm.myScore))]),_vm._v(\" \"),_c('div',{class:['game-player-avatar',{success:_vm.isCorrect=='success'},{fail:_vm.isCorrect=='fail'}]},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})])]),_vm._v(\" \"),(_vm.mode=='pk')?_c('div',{staticClass:\"game-player-rival\"},[_c('div',{class:['game-player-avatar',_vm.rivalAnswerStatus]},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"game-player-score\"},[_vm._v(_vm._s(_vm.rivalScore))])]):_vm._e(),_vm._v(\" \"),((_vm.gameStatus=='start' || _vm.gameStatus=='checking') && _vm.mode!=='unlimited')?_c('div',{staticClass:\"game-timing\"},[_c('div',{staticClass:\"game-timing-left\"},[_c('i',{class:{rotate:_vm.isRotate},style:(_vm.timingLeftStyle)})]),_vm._v(\" \"),_c('div',{staticClass:\"game-timing-right\"},[_c('i',{class:{rotate:_vm.isRotate},style:(_vm.timingRightStyle)})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.timingCount))])]):_vm._e(),_vm._v(\" \"),((_vm.gameStatus=='start' || _vm.gameStatus=='checking') && _vm.mode=='unlimited')?_c('div',{staticClass:\"game-remaining\"},[_c('i',{class:{grey:_vm.wrongCount>0}}),_vm._v(\" \"),_c('i',{class:{grey:_vm.wrongCount>1}}),_vm._v(\" \"),_c('i',{class:{grey:_vm.wrongCount>2}})]):_vm._e()]),_vm._v(\" \"),(_vm.gameStatus=='prepare')?_c('div',{class:['game-question-type',_vm.currentQuestion.question_type]},[_c('label',[_vm._v(\"第\"+_vm._s(_vm.questionIndex+1)+\"题\")]),_vm._v(\" \"),_c('div',{staticClass:\"q-type\"},[_vm._v(_vm._s(_vm.currentQuestion.question_type == \"single\" ? \"单选题\" : \"多选题\"))])]):_vm._e(),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),(_vm.gameStatus=='start' || _vm.gameStatus=='checking')?_c('div',{staticClass:\"game-qa\"},[_c('div',{staticClass:\"game-question\"},[_vm._v(\"\\n                \"+_vm._s(_vm.currentQuestion.title)+\"\\n                \"),(_vm.currentQuestion.image)?_c('img',{attrs:{\"src\":_vm.currentQuestion.image}}):_vm._e(),_vm._v(\" \"),(_vm.currentQuestion.audio)?_c('div',{staticClass:\"game-q-audio\",class:{playing:_vm.audioPlaying},on:{\"click\":_vm.playAudio}},[_c('span',[_vm._v(_vm._s(_vm._f(\"duration2str\")(_vm.currentQuestion.duration)))]),_c('span',[_vm._v(_vm._s(_vm.isIOS ? \"  点击播放\":\"\"))])]):_vm._e()]),_vm._v(\" \"),_c('ul',{staticClass:\"game-answer-list\"},_vm._l((_vm.currentQuestion.options_list),function(q,i){return _c('li',{key:i,class:{\n                        choose : _vm.answerList[i]==1,\n                        correct: _vm.currentQuestion.correct_list[i] && _vm.gameStatus=='checking',\n                        success: _vm.currentQuestion.correct_list[i] && _vm.answerList[i]==1 && _vm.gameStatus=='checking',\n                        fail : !_vm.currentQuestion.correct_list[i] && _vm.answerList[i]==1 && _vm.gameStatus=='checking'\n                    },on:{\"click\":function($event){return _vm.doAnswer(i)}}},[_vm._v(_vm._s(q))])}),0),_vm._v(\" \"),(_vm.gameStatus=='checking')?_c('div',{class:['game-answer-result',_vm.isCorrect ? _vm.isCorrect : '']},[(_vm.isCorrect=='fail')?_c('span',[_vm._v(\"很遗憾，回答错误\")]):_vm._e(),_vm._v(\" \"),(_vm.isCorrect=='success')?_c('span',[_vm._v(\"恭喜您，回答正确\")]):_vm._e()]):_vm._e()]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.gameStatus == 'end')?_c('div',{class:['layer-pk-mode',_vm.isPkWin?'success':'fail']},[_c('div',{staticClass:\"gameover-result-title\"},[_vm._v(_vm._s(_vm.isPkWin?\"胜利\":\"失败\"))]),_vm._v(\" \"),_c('div',{staticClass:\"gameover-result-content\"},[(_vm.mode == 'pk')?_c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"myself\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.myScore))])]),_vm._v(\" \"),_c('div',{staticClass:\"rival\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.rivalScore))])])]):_c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_vm._m(1)]),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_c('div',{staticClass:\"game-score-count\"},[_vm._v(\"积分+\"+_vm._s(_vm.score))]),_vm._v(\" \"),_c('div',{staticClass:\"gameover-btns\"},[_c('a',{staticClass:\"goback\",on:{\"click\":_vm.goBack}},[_vm._v(\"返回\")]),_vm._v(\" \"),(_vm.mode!='level')?_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.oneMoreTry()}}},[_vm._v(\"再来一局\")]):_vm._e(),_vm._v(\" \"),(_vm.mode=='level' && _vm.gameStatus == 'end' && (_vm.questionIndex==_vm.beginData.length-1 || (_vm.questionIndex<_vm.beginData.length-1 && !_vm.isPkWin)))?_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.oneMoreTry()}}},[_vm._v(\"再来一局\")]):_vm._e(),_vm._v(\" \"),(_vm.mode=='level' && _vm.gameStatus == 'end' && _vm.questionIndex<_vm.beginData.length-1 && _vm.isPkWin)?_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.nextLevel()}}},[_vm._v(\"下一关\")]):_vm._e()])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('audio',{attrs:{\"id\":\"qa-audio\",\"preload\":\"preload\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"myself\"},[_c('div',{staticClass:\"avatar\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"game-this-round\"},[_c('em',[_vm._v(\"本局奖励\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ce96de32\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/game.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ce96de32\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./game.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./game.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./game.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ce96de32\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./game.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/game.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}