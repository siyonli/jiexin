{"version":3,"sources":["webpack:///src/components/game/pk.vue","webpack:///./src/components/game/pk.vue?ff88","webpack:///./src/components/game/pk.vue"],"names":["pk","data","baseUrl","common","ossUrl","mode","this","$route","query","matching","rival","user_id","nickname","avatar","rule","batch_id","myScore","rivalScore","score","consuming","consumingText","max_duration","userInfo","$store","state","beginTime","endTime","beginData","gameStatus","timingLeftStyle","timingRightStyle","isRotate","timingCount","countdownTimer","currentQuestion","questionIndex","isCorrect","answerList","isCanDoAnswer","isPkWin","audioSrc","rivalAnswerStatus","gameTimer","questionTimer","rivalTimer","audioTimer","consumingTimer","beginTimer","checkAudioTimer","isIOS","created","init","u","navigator","userAgent","match","methods","answerBeginByPK","answerBeginByUnlimited","_this","fn","getQuestion","clearInterval","setInterval","t","Date","getTime","$api","answerBegin","then","res","code","_t","setTimeout","_this2","checkIsAudio","$popup","msg","getaUnlimitedQuestion","_this3","_this4","pkModeBegin","index","_this5","length","pkModeEnd","options_list","map","a","arr","correct_list","i","indexOf","duration","audio","document","getElementById","load","play","pause","currentTime","timingCountDown","Math","ceil","$wx","ready","removeEventListener","addEventListener","rival_correct","isBothAnswer","rival_duration","playAudio","stopAudio","audi0","_this6","console","log","answerEnd","_this7","game","$nextTick","forEach","src","source","createElement","type","split","appendChild","doAnswer","bool","some","question_type","checkISCorrect","filter","$forceUpdate","_this8","win_score","questionReply","time","_this9","Number","count","checkAnswer","_this10","_this11","a_length","c_length","is","every","selecteds","String","param","question_id","id","oneMoreTry","goBack","window","history","go","beforeDestroy","watch","v","m","s","filters","duration2str","game_pk","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","_e","_s","on","click","class","success","fail","rotate","style","_m","title","image","_f","_l","q","key","choose","correct","$event","staticStyle","overflow","staticRenderFns","display","preload","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/16.2b709128daedcccd244a.js","sourcesContent":["<template>\n    <div class=\"game-wrap\">\n        <div class=\"matching\" v-if=\"mode=='pk' && gameStatus == 'matching'\">\n            <div class=\"matching-animate\">\n                <div class=\"user\">\n                    <img :src=\"userInfo.avatar\">\n                </div>\n                <div class=\"matching-planet matching-planet-1\"></div>\n                <div class=\"matching-planet matching-planet-2\"></div>\n                <div class=\"matching-planet matching-planet-3\"></div>\n                <div class=\"rival\" v-if=\"!matching\">\n                    <img :src=\"rival.avatar\">\n                </div>\n            </div>\n            <div class=\"matching-consuming\" v-if=\"matching\">正在匹配 {{consumingText}}</div>\n            <div class=\"matching-consuming\" v-else>匹配完成</div>\n            <div class=\"matching-btn matching-btn-cancel\" v-if=\"matching\" @click=\"goBack\">取消</div>\n            <div class=\"matching-btn matching-btn-done\" v-else>正在进入</div>\n        </div>\n\n        <div class=\"game-container\" v-if=\"gameStatus !== 'matching' && gameStatus!=='end'\">\n            <div class=\"game-player\">\n                <div class=\"game-player-self\">\n                    <div class=\"game-player-score\">{{myScore}}</div>\n                    <div :class=\"['game-player-avatar',{success:isCorrect=='success'},{fail:isCorrect=='fail'}]\">\n                        <img :src=\"userInfo.avatar\">\n                    </div>\n                </div>\n                <div class=\"game-player-rival\" v-if=\"mode=='pk'\">\n                    <div :class=\"['game-player-avatar',rivalAnswerStatus]\">\n                        <img :src=\"rival.avatar\">\n                    </div>\n                    <div class=\"game-player-score\">{{rivalScore}}</div>\n                </div>\n                <div class=\"game-timing\" v-if=\"(gameStatus=='start' || gameStatus=='checking') && mode!=='unlimited'\">\n                    <div class=\"game-timing-left\"><i :class=\"{rotate:isRotate}\" :style=\"timingLeftStyle\"></i></div>\n                    <div class=\"game-timing-right\"><i :class=\"{rotate:isRotate}\" :style=\"timingRightStyle\"></i></div>\n                    <span>{{timingCount}}</span>\n                </div>\n            </div>\n            <div :class=\"['game-question-type',currentQuestion.question_type]\" v-if=\"gameStatus=='prepare'\">\n                <label>第{{questionIndex+1}}题</label>\n                <div class=\"q-type\">{{currentQuestion.question_type == \"single\" ? \"单选题\" : \"多选题\"}}</div>\n            </div>\n            <div style=\"display: none;\">\n                <audio id=\"qa-audio\" preload=\"preload\"></audio>\n            </div>\n            <div class=\"game-qa\" v-if=\"gameStatus=='start' || gameStatus=='checking'\">\n                <div class=\"game-question\">\n                    {{currentQuestion.title}}\n                    <img v-if=\"currentQuestion.image\" :src=\"currentQuestion.image\">\n                    <div class=\"game-q-audio\" v-if=\"currentQuestion.audio\" @click=\"playAudio\">\n                        {{currentQuestion.duration|duration2str}}<span>{{isIOS ? \"  点击播放\":\"\"}}</span>\n                    </div>\n                </div>\n                <ul class=\"game-answer-list\">\n                    <li v-for=\"(q,i) in currentQuestion.options_list\" :key=\"i\" @click=\"doAnswer(i)\"\n                        :class=\"{\n                            choose : answerList[i]==1,\n                            correct: currentQuestion.correct_list[i] && gameStatus=='checking',\n                            success: currentQuestion.correct_list[i] && answerList[i]==1 && gameStatus=='checking',\n                            fail : !currentQuestion.correct_list[i] && answerList[i]==1 && gameStatus=='checking'\n                        }\"\n                    >{{q}}</li>\n                </ul>\n                <div :class=\"['game-answer-result',isCorrect ? isCorrect : '']\" v-if=\"gameStatus=='checking'\">\n                    <span v-if=\"isCorrect=='fail'\">很遗憾，回答错误</span>\n                    <span v-if=\"isCorrect=='success'\">恭喜您，回答正确</span>\n                </div>\n            </div>\n        </div>\n\n        <div :class=\"['layer-pk-mode',isPkWin?'success':'fail']\" v-if=\"mode=='pk' && gameStatus == 'end'\">\n            <div class=\"gameover-result-title\">{{isPkWin?\"胜利\":\"失败\"}}</div>\n            <div class=\"gameover-result-content\">\n                <div style=\"overflow: hidden;\">\n                    <div class=\"myself\">\n                        <div class=\"avatar\"><img :src=\"userInfo.avatar\"></div>\n                        <div class=\"score\">{{myScore}}</div>\n                    </div>\n                    <div class=\"rival\">\n                        <div class=\"avatar\"><img :src=\"rival.avatar\"></div>\n                        <div class=\"score\">{{rivalScore}}</div>\n                    </div>\n                </div>\n                \n                <label class=\"game-this-round\"><em>本局奖励</em></label>\n                <div class=\"game-score-count\">积分+{{score}}</div>\n                <div class=\"gameover-btns\">\n                    <a class=\"goback\" @click=\"goBack\">返回</a>\n                    <a class=\"try-again\" @click=\"oneMoreTry()\">再来一局</a>\n                </div>\n            </div>\n            \n        </div>\n\n\n    </div>\n</template>\n\n<script>\n    import '../../assets/scss/game.scss'\n    import common from '../../assets/js/common'\n    export default {\n        data() {\n            return {\n                baseUrl : common.ossUrl,\n                mode : this.$route.query.mode || 'pk',      //模式\n                matching : true,                    //匹配状态 true匹配中\n                rival : {  //对手信息，PK模式独有\n                            \"user_id\": \"2\",\n                            \"nickname\": \"Luca\",\n                            \"avatar\": \"\\/uploads\\/20190801\\/41c366155ef4324020251f0def4de6c2.jpeg\"\n                        },                          //对手  \n                rule : {}, \n                batch_id : 0,\n                myScore : 0,\n                rivalScore : 0,\n                score : 0,\n                consuming : 0,                      //耗时\n                consumingText : '00:00',            //耗时\n                max_duration : 20,\n                userInfo : this.$store.state.userInfo,\n                beginTime : '',\n                endTime : '',\n                beginData : {},\n                gameStatus : 'matching',            //游戏状态 matching 匹配中 prepare 准备 start 开始 checking 检查答案 end 结束\n                timingLeftStyle : '',\n                timingRightStyle : '',\n                isRotate : false,\n                timingCount : 10,\n                countdownTimer : null,\n                currentQuestion : {},\n                questionIndex : 0,\n                isCorrect : '',\n                answerList : [],\n                isCanDoAnswer : true,\n                isPkWin : false,\n                audioSrc : false,\n                rivalAnswerStatus : '',\n                gameTimer : null,\n                questionTimer : null,\n                rivalTimer : null,\n                audioTimer : null,\n                consumingTimer : null,\n                beginTimer : null,\n                checkAudioTimer : null,\n                isIOS : false\n            }\n        },\n        created() {\n            this.init();\n            var u = navigator.userAgent;\n            this.isIOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\n            // this.timingCountDown(10);\n        },\n        methods: {\n            init(){\n                this.matching = true;\n                this.gameStatus = 'matching';\n                this.isCanDoAnswer = true;\n                this.beginData = [];\n                this.questionIndex = 0;\n                this.timingLeftStyle = '';\n                this.timingRightStyle = '';\n                this.consuming = 0;\n                this.countdownTimer = null;\n                this.consumingTimer = null;\n                this.gameTimer = null;\n                this.questionTimer = null;\n                this.rivalTimer = null;\n                this.audioTimer = null;\n                this.beginTimer = null;\n                this.checkAudioTimer = null;\n                this.myScore = 0;\n                this.rivalScore = 0;\n                this.isCorrect= '';\n                this.rivalAnswerStatus = '';\n                if(this.mode == 'pk'){\n                    this.answerBeginByPK();\n                }\n                if(this.mode == 'unlimited'){\n                    this.answerBeginByUnlimited();\n                }\n            },\n            /**\n             * PK模式开始答题\n             */\n            answerBeginByPK(){\n                const fn = (data)=>{\n                    this.rival = data.rival;\n                    this.rule = data.rule;\n                    this.batch_id = data.batch_id;\n                    this.getQuestion(data.batch_id);\n                    clearInterval(this.consumingTimer);\n                    this.consumingTimer = null;\n                }\n                this.consumingTimer = setInterval(()=>{\n                    this.consuming++;\n                },1000)\n                var t = new Date().getTime();\n                this.$api.answerBegin({\n                    mode : this.mode\n                }).then(res=>{\n                    if(res.code == 1){\n                        var _t = new Date().getTime();\n                        if(_t-t>=4000){\n                            this.matching = false;\n                            fn(res.data);\n                        }else{\n                            this.beginTimer = setTimeout(()=>{\n                                this.matching = false;\n                                fn(res.data);\n                            },4000-_t+t)\n                        }\n                    }\n                })\n            },\n            getQuestion(batch_id){\n                this.$api.getQuestion({\n                    batch_id : batch_id\n                }).then(res=>{\n                    if(res.code == 1){\n                        this.beginData = res.data;\n                        this.checkAudioTimer = setTimeout(()=>{\n                            this.checkIsAudio(0);\n                            // this.pkModeBegin(0);\n                        },2000)\n                        \n                    }else{\n                        this.$popup(res.msg);\n                    }\n                })\n            },\n            getaUnlimitedQuestion(batch_id){\n                this.$api.getQuestion({\n                    batch_id : batch_id\n                }).then(res=>{\n                    if(res.code == 1){\n                        this.beginData = res.data;\n                        this.checkIsAudio(0);\n                    }else{\n                        this.$popup(res.msg);\n                    }\n                })\n            },\n            /**\n             * 无限模式开始答题\n             */\n            answerBeginByUnlimited(){\n                this.gameStatus = 'matching';\n                this.$api.answerBegin({\n                    mode : this.mode\n                }).then(res=>{\n                    if(res.code == 1){\n                        this.batch_id = res.data.batch_id;\n                        this.rule = res.data.rule;\n                        this.getaUnlimitedQuestion(res.data.batch_id);\n                    }else{\n                        this.$popup(res.msg);\n                    }\n                })\n                // this.beginData = this.makeQuestion();\n                // this.pkModeBegin(0);\n            },\n            /**\n            *   PK模式开始游戏\n            */\n            pkModeBegin(index){\n                if(index >= this.beginData.length){\n                    this.pkModeEnd();\n                    return;\n                }\n                this.timingRightStyle = '';\n                this.timingLeftStyle = '';\n                this.isCanDoAnswer = true;\n                this.gameStatus = 'prepare';\n                this.questionIndex = index;\n                this.currentQuestion = this.beginData[this.questionIndex];\n                this.isCorrect = '';\n                this.rivalAnswerStatus = '';\n                this.answerList = this.currentQuestion.options_list.map(a=>0);\n                // this.currentQuestion.answerList = this.currentQuestion.options_list.map(a=>0);\n                var arr = this.currentQuestion.correct_list;\n                this.currentQuestion.correct_list = this.currentQuestion.options_list.map((a,i)=>{\n                    return arr.indexOf(i) > -1;\n                })\n                // console.log(this.currentQuestion);\n                this.questionTimer = setTimeout(()=>{\n                    \n                    this.checkIsAudio(this.questionIndex+1);\n                    \n                    var duration = (this.currentQuestion.max_duration || this.max_duration);\n                    if(this.currentQuestion.audio){\n                        var audio = document.getElementById(\"qa-audio\");\n                        audio.load();\n                        audio.play();\n                        audio.pause();\n                        audio.currentTime = 0;\n\n                        if(this.isIOS){\n                            duration += 4;\n                            this.gameStatus = 'start';\n                            this.timingCountDown(duration);\n                        }else{\n                            const fn = ()=>{\n                                this.currentQuestion.duration = audio.duration;\n                                duration += Math.ceil(audio.duration) + 2;\n                                this.gameStatus = 'start';\n                                this.timingCountDown(duration);\n                                this.beginTime = new Date().getTime();\n                            }\n                            this.audioTimer = setTimeout(()=>{\n                                this.$wx.ready(()=>{\n                                    audio.play();\n                                    audio.removeEventListener(\"loadedmetadata\",fn,true)\n                                })\n                            },500)\n                            audio.addEventListener(\"loadedmetadata\",fn,true)\n                        }\n                    }else{\n                        this.gameStatus = 'start';\n                        this.beginTime = new Date().getTime();\n                        this.timingCountDown(duration);\n                    }\n                    \n                    this.rivalTimer = setTimeout(()=>{\n                        this.rivalAnswerStatus = this.currentQuestion.rival_correct == 1 ? \"success\" : \"fail\"\n                        this.isBothAnswer(\"对手答题完毕\");\n                    },this.currentQuestion.rival_duration*1000)\n                },1500)\n            },\n            playAudio(){\n                if(!this.isIOS){\n                    return;\n                }\n                var audio = document.getElementById(\"qa-audio\");\n                audio.play();\n            },\n            stopAudio(){\n                var audio = document.getElementById(\"qa-audio\");\n                audio.pause();\n                audi0.currentTime = 0;\n            },\n            /**\n            *   PK模式结束游戏\n            */\n            pkModeEnd(){\n                console.log(\"game over\");\n                this.$api.answerEnd({\n                    batch_id : this.batch_id\n                }).then(res=>{\n                    this.gameStatus = 'end';\n                    this.isPkWin = res.data.score > 0;\n                    if(res.code==1){\n                        this.score = res.data.score;\n                    }else{\n                        this.$popup(res.msg);\n                    }\n                })\n            },\n            /**\n            *   检查下一题是否为音频题 如果是则预加载音频 并获取时长\n            */\n            checkIsAudio(index){\n                if(index >= this.beginData.length){\n                    return;\n                }\n                var game = this.beginData[index];\n                if(game.audio && game.audio.length){\n                    if(index == 0){\n                        for(var i =0;i<this.beginData.length;i++){\n                            if(!this.beginData[i].audio){\n                                this.beginData[0] = this.beginData[i];\n                                this.beginData[i] = game;\n                                break;\n                            }\n                        }\n                        this.pkModeBegin(index);\n                        return;\n                    }\n                    // this.audioSrc = game.audio;\n                    this.$nextTick(()=>{\n                        var audio = document.getElementById(\"qa-audio\");\n                        // console.log(audio);\n                        if(!audio){\n                            return;\n                        }\n                        game.audio.forEach(src=>{\n                            var source = document.createElement(\"source\");\n                            var type = src.split(\".\")[1];\n                            source.type = type == \"ogg\" ? \"audio/ogg\" : \"audio/mpeg\";\n                            source.src = this.baseUrl + src;\n                            audio.appendChild(source);\n                        })\n                        audio.load();\n                        // audio.oncanplay = ()=>{\n                        //     this.beginData[index].duration = audio.duration;\n                        //     if(index==0 && this.mode == 'pk'){\n                        //         this.pkModeBegin(index);\n                        //     }\n                        //     if(index==0 && this.mode == 'unlimited'){\n                        //         this.unlimitedModeBegin(index);\n                        //     }\n                        // }\n                    })\n                    \n                }else{\n                    if(index==0 && this.mode == 'pk'){\n                        this.pkModeBegin(index);\n                    }\n                }\n            },\n            /**\n            *   选择答题选项\n            */\n            doAnswer(index){\n                if(!this.isCanDoAnswer){\n                    return;\n                }\n                var bool = this.answerList.some(a=>a);\n\n                if(this.currentQuestion.question_type == 'single'){\n                    // console.log(\"单选题\");\n                    if(!bool){\n                        this.answerList[index] = 1;\n                        this.endTime = new Date().getTime();\n                        var bool = this.checkISCorrect();\n                        this.isCorrect = bool ? \"success\" : \"fail\";\n                        this.isBothAnswer(\"单选题，本人答题完毕\");\n                    }\n                }else{\n                    this.answerList[index] = !this.answerList[index];\n                    var length = this.answerList.filter(a=>a).length;\n                    var corrleng = this.currentQuestion.correct_list.filter(a=>a).length;\n                    if(length == corrleng){\n                        this.endTime = new Date().getTime();\n                        var bool = this.checkISCorrect();\n                        this.isCorrect = bool ? \"success\" : \"fail\";\n                        this.isBothAnswer(\"多选题，本人答题完毕\");\n                    }\n                }\n                this.$forceUpdate();\n                \n            },\n            isBothAnswer(type){\n                console.log(type,this.isCorrect,this.rivalAnswerStatus,this.myScore)\n                this.stopAudio();\n                if(this.isCorrect && this.rivalAnswerStatus){\n                    clearInterval(this.countdownTimer);\n                    this.countdownTimer = null;\n                    // this.timingRightStyle = '';\n                    // this.timingLeftStyle = '';\n                    this.isRotate = false;\n                    this.isCanDoAnswer = false;\n                    this.gameStatus = 'checking';\n                    this.myScore+= this.isCorrect=='success' ? this.rule.win_score : 0;\n                    this.rivalScore += this.currentQuestion.rival_correct == 1 ? this.rule.win_score : 0;\n                    this.questionReply();\n                    this.gameTimer = setTimeout(()=>{\n                        this.pkModeBegin(this.questionIndex+1);\n                    },2000)\n                }else if(this.isCorrect){\n                    this.gameStatus = 'checking';\n                    // this.myScore+= this.isCorrect=='success' ? this.rule.win_score : 0;\n                }\n            },\n            /**\n             * 答题倒计时\n             */\n            timingCountDown(time){\n                this.timingCount = time;\n                var t = Number(time) *5;\n                var count = 0;\n                // console.log(time,t);\n                this.countdownTimer = setInterval(()=>{\n                    count++;\n                    if(count % 10 == 0){\n                        this.timingCount--;\n                    }\n                    if(count<=t){\n                        this.timingRightStyle = `transform: rotate(${180/t*count-45}deg)`;\n                    }else{\n                        this.timingLeftStyle = `transform: rotate(${180/t*(count-t)-45}deg)`;\n                    }\n                    if(this.timingCount<=0){\n                        clearInterval(this.countdownTimer);\n                        this.countdownTimer = null;\n                        // this.timingRightStyle = '';\n                        // this.timingLeftStyle = '';\n                        this.isRotate = false;\n                        this.checkAnswer();\n                    }\n                },100)\n            },\n            /**\n            *   选择选项后检查答案是否正确\n            */\n            checkAnswer(){\n                this.isCanDoAnswer = false;\n                this.gameStatus = 'checking';\n                var bool = this.checkISCorrect();\n                this.isCorrect = bool ? \"success\" : \"fail\";\n                this.myScore+= bool ? this.rule.win_score : 0;\n                this.rivalScore += this.currentQuestion.rival_correct == 1 ? this.rule.win_score : 0;\n                console.log(\"检查答案\");\n                this.questionReply();\n                setTimeout(()=>{\n                    this.pkModeBegin(this.questionIndex+1);\n                },2000)\n            },\n            checkISCorrect(){\n                var a_length = this.answerList.filter(a=>a).length;\n                var c_length = this.currentQuestion.correct_list.filter(a=>a).length;\n                var is = this.currentQuestion.correct_list.every((a,i)=>{\n                    return !!a == !!this.answerList[i];\n                })\n                return a_length==c_length && is;\n            },\n            questionReply(){\n                var duration = ((this.endTime||new Date().getTime()) - this.beginTime)/1000;\n                // console.log(this.endTime , this.beginTime,duration);\n                var selecteds = this.answerList.map((a,i)=>{\n                        return a ? String(i) : '';\n                    }).filter(a=>a);\n                var param = {\n                    batch_id : this.batch_id,\n                    question_id : this.currentQuestion.id,\n                    selecteds : selecteds,\n                    duration : duration\n                }\n                if(!selecteds.length){\n                    param.selecteds['0'] = ''\n                }\n                this.$api.questionReply(param).then(res=>{\n\n                })\n            },\n            /**\n            *   再来一局\n            */\n            oneMoreTry(){\n                this.init();\n            },\n            goBack(){\n                window.history.go(-1);\n            }\n        },\n        beforeDestroy(){\n            console.log(\"页面组件即将销毁\");\n            clearInterval(this.countdownTimer);\n            this.countdownTimer = null;\n            clearInterval(this.gameTimer);\n            this.gameTimer = null;\n            clearInterval(this.questionTimer);\n            this.questionTimer = null;\n            clearInterval(this.rivalTimer);\n            this.rivalTimer = null;\n            clearInterval(this.audioTimer);\n            this.audioTimer = null;\n            clearInterval(this.consumingTimer);\n            this.consumingTimer = null;\n            clearInterval(this.beginTimer);\n            this.beginTimer = null;\n            clearInterval(this.checkAudioTimer);\n            this.checkAudioTimer = null;\n        },\n        watch:{\n            consuming(v){\n                var m = v - v % 60,\n                    s = v - m * 60;\n                m = m < 10 ? (\"0\"+m) : m;\n                s = s < 10 ? (\"0\"+s) : s;\n                this.consumingText = m + \":\" + s;\n            }\n        },\n        filters : {\n            duration2str(v){\n                console.log(v);\n                v = Math.ceil(v||0);\n                var m = v - v % 60,\n                    s = v - m * 60;\n                m = m < 10 ? (\"0\"+m) : m;\n                s = s < 10 ? (\"0\"+s) : s;\n                return m + \":\" + s;\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\">\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/game/pk.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game-wrap\"},[(_vm.mode=='pk' && _vm.gameStatus == 'matching')?_c('div',{staticClass:\"matching\"},[_c('div',{staticClass:\"matching-animate\"},[_c('div',{staticClass:\"user\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-1\"}),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-2\"}),_vm._v(\" \"),_c('div',{staticClass:\"matching-planet matching-planet-3\"}),_vm._v(\" \"),(!_vm.matching)?_c('div',{staticClass:\"rival\"},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]):_vm._e()]),_vm._v(\" \"),(_vm.matching)?_c('div',{staticClass:\"matching-consuming\"},[_vm._v(\"正在匹配 \"+_vm._s(_vm.consumingText))]):_c('div',{staticClass:\"matching-consuming\"},[_vm._v(\"匹配完成\")]),_vm._v(\" \"),(_vm.matching)?_c('div',{staticClass:\"matching-btn matching-btn-cancel\",on:{\"click\":_vm.goBack}},[_vm._v(\"取消\")]):_c('div',{staticClass:\"matching-btn matching-btn-done\"},[_vm._v(\"正在进入\")])]):_vm._e(),_vm._v(\" \"),(_vm.gameStatus !== 'matching' && _vm.gameStatus!=='end')?_c('div',{staticClass:\"game-container\"},[_c('div',{staticClass:\"game-player\"},[_c('div',{staticClass:\"game-player-self\"},[_c('div',{staticClass:\"game-player-score\"},[_vm._v(_vm._s(_vm.myScore))]),_vm._v(\" \"),_c('div',{class:['game-player-avatar',{success:_vm.isCorrect=='success'},{fail:_vm.isCorrect=='fail'}]},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})])]),_vm._v(\" \"),(_vm.mode=='pk')?_c('div',{staticClass:\"game-player-rival\"},[_c('div',{class:['game-player-avatar',_vm.rivalAnswerStatus]},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"game-player-score\"},[_vm._v(_vm._s(_vm.rivalScore))])]):_vm._e(),_vm._v(\" \"),((_vm.gameStatus=='start' || _vm.gameStatus=='checking') && _vm.mode!=='unlimited')?_c('div',{staticClass:\"game-timing\"},[_c('div',{staticClass:\"game-timing-left\"},[_c('i',{class:{rotate:_vm.isRotate},style:(_vm.timingLeftStyle)})]),_vm._v(\" \"),_c('div',{staticClass:\"game-timing-right\"},[_c('i',{class:{rotate:_vm.isRotate},style:(_vm.timingRightStyle)})]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.timingCount))])]):_vm._e()]),_vm._v(\" \"),(_vm.gameStatus=='prepare')?_c('div',{class:['game-question-type',_vm.currentQuestion.question_type]},[_c('label',[_vm._v(\"第\"+_vm._s(_vm.questionIndex+1)+\"题\")]),_vm._v(\" \"),_c('div',{staticClass:\"q-type\"},[_vm._v(_vm._s(_vm.currentQuestion.question_type == \"single\" ? \"单选题\" : \"多选题\"))])]):_vm._e(),_vm._v(\" \"),_vm._m(0),_vm._v(\" \"),(_vm.gameStatus=='start' || _vm.gameStatus=='checking')?_c('div',{staticClass:\"game-qa\"},[_c('div',{staticClass:\"game-question\"},[_vm._v(\"\\n                \"+_vm._s(_vm.currentQuestion.title)+\"\\n                \"),(_vm.currentQuestion.image)?_c('img',{attrs:{\"src\":_vm.currentQuestion.image}}):_vm._e(),_vm._v(\" \"),(_vm.currentQuestion.audio)?_c('div',{staticClass:\"game-q-audio\",on:{\"click\":_vm.playAudio}},[_vm._v(\"\\n                    \"+_vm._s(_vm._f(\"duration2str\")(_vm.currentQuestion.duration))),_c('span',[_vm._v(_vm._s(_vm.isIOS ? \"  点击播放\":\"\"))])]):_vm._e()]),_vm._v(\" \"),_c('ul',{staticClass:\"game-answer-list\"},_vm._l((_vm.currentQuestion.options_list),function(q,i){return _c('li',{key:i,class:{\n                        choose : _vm.answerList[i]==1,\n                        correct: _vm.currentQuestion.correct_list[i] && _vm.gameStatus=='checking',\n                        success: _vm.currentQuestion.correct_list[i] && _vm.answerList[i]==1 && _vm.gameStatus=='checking',\n                        fail : !_vm.currentQuestion.correct_list[i] && _vm.answerList[i]==1 && _vm.gameStatus=='checking'\n                    },on:{\"click\":function($event){return _vm.doAnswer(i)}}},[_vm._v(_vm._s(q))])}),0),_vm._v(\" \"),(_vm.gameStatus=='checking')?_c('div',{class:['game-answer-result',_vm.isCorrect ? _vm.isCorrect : '']},[(_vm.isCorrect=='fail')?_c('span',[_vm._v(\"很遗憾，回答错误\")]):_vm._e(),_vm._v(\" \"),(_vm.isCorrect=='success')?_c('span',[_vm._v(\"恭喜您，回答正确\")]):_vm._e()]):_vm._e()]):_vm._e()]):_vm._e(),_vm._v(\" \"),(_vm.mode=='pk' && _vm.gameStatus == 'end')?_c('div',{class:['layer-pk-mode',_vm.isPkWin?'success':'fail']},[_c('div',{staticClass:\"gameover-result-title\"},[_vm._v(_vm._s(_vm.isPkWin?\"胜利\":\"失败\"))]),_vm._v(\" \"),_c('div',{staticClass:\"gameover-result-content\"},[_c('div',{staticStyle:{\"overflow\":\"hidden\"}},[_c('div',{staticClass:\"myself\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.userInfo.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.myScore))])]),_vm._v(\" \"),_c('div',{staticClass:\"rival\"},[_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.rival.avatar}})]),_vm._v(\" \"),_c('div',{staticClass:\"score\"},[_vm._v(_vm._s(_vm.rivalScore))])])]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"game-score-count\"},[_vm._v(\"积分+\"+_vm._s(_vm.score))]),_vm._v(\" \"),_c('div',{staticClass:\"gameover-btns\"},[_c('a',{staticClass:\"goback\",on:{\"click\":_vm.goBack}},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('a',{staticClass:\"try-again\",on:{\"click\":function($event){return _vm.oneMoreTry()}}},[_vm._v(\"再来一局\")])])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"none\"}},[_c('audio',{attrs:{\"id\":\"qa-audio\",\"preload\":\"preload\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"game-this-round\"},[_c('em',[_vm._v(\"本局奖励\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1627aa68\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/game/pk.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1627aa68\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./pk.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./pk.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./pk.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1627aa68\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./pk.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/game/pk.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}